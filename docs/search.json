[
  {
    "objectID": "technical.html",
    "href": "technical.html",
    "title": "Technical Information",
    "section": "",
    "text": "This system produces two independent audio outputs, one driven by the gyroscope-derived baseline frequency and one driven by keypad+knob inputs. The MCU ingests user inputs, maps them to frequencies, and generates digital waveforms which the FPGA filters and processes. The final waveforms are converted to analog and amplified to the speakers.\n\n\n\n\n\n\n\nGyroscope to MCU: SPI, 8-bit samples (per project description)\nKeypad to MCU: GPIO matrix scanning\nKnobs to MCU: On-chip ADC channels (voltage from potentiometers)\nMCU to FPGA: SPI (waveform samples, control/status)\nFPGA to DACs: I2C (two channels for two speakers)"
  },
  {
    "objectID": "technical.html#system-architecture",
    "href": "technical.html#system-architecture",
    "title": "Technical Information",
    "section": "",
    "text": "This system produces two independent audio outputs, one driven by the gyroscope-derived baseline frequency and one driven by keypad+knob inputs. The MCU ingests user inputs, maps them to frequencies, and generates digital waveforms which the FPGA filters and processes. The final waveforms are converted to analog and amplified to the speakers.\n\n\n\n\n\n\n\nGyroscope to MCU: SPI, 8-bit samples (per project description)\nKeypad to MCU: GPIO matrix scanning\nKnobs to MCU: On-chip ADC channels (voltage from potentiometers)\nMCU to FPGA: SPI (waveform samples, control/status)\nFPGA to DACs: I2C (two channels for two speakers)"
  },
  {
    "objectID": "technical.html#calculations-and-performance",
    "href": "technical.html#calculations-and-performance",
    "title": "Technical Information",
    "section": "Calculations and Performance",
    "text": "Calculations and Performance\n\nFrequency resolution: ( = )\nPCLK minimum speed (given): ( _{} = )\nLow-pass filter example: ( N = 4 )\nHigh-pass filter example: ( N = 8 )\nMultiplier estimate: Each one requires ( (N/2)_2 N ) multipliers\n\n( 2_2(4) + 4_2(8) = 4 + 12 = 16 ) complex 8-bit multipliers\n\n\nNotes: - Select sampling rate and FFT/window sizes to meet target frequency resolution and latency. - Ensure SPI bandwidth supports aggregate waveform/control traffic between MCU and FPGA. - I2C bus timing must accommodate two DAC channels at chosen audio sample rate."
  },
  {
    "objectID": "technical.html#risk-elements",
    "href": "technical.html#risk-elements",
    "title": "Technical Information",
    "section": "Risk Elements",
    "text": "Risk Elements\n\nSlip ring + gyroscope signal integrity and noise are the top risk. The signal must remain readable at the target spin frequency; additional filtering and shielding may be necessary.\nScheduling and concurrency: The MCU must read keypad/gyro and stream/control audio at rates that keep both outputs continuous and within range, while allowing the FPGA adequate time for filtering.\nTuning filter parameters and stability: Filter orders and cutoff frequencies must be tuned to avoid audible artifacts and preserve musical intent."
  },
  {
    "objectID": "results.html",
    "href": "results.html",
    "title": "Results",
    "section": "",
    "text": "Audio outputs: Two independent channels produced in real time\nFrequency mapping: Gyro-derived baseline and keypad-derived note frequencies"
  },
  {
    "objectID": "results.html#key-results",
    "href": "results.html#key-results",
    "title": "Results",
    "section": "",
    "text": "Audio outputs: Two independent channels produced in real time\nFrequency mapping: Gyro-derived baseline and keypad-derived note frequencies"
  },
  {
    "objectID": "results.html#measurements",
    "href": "results.html#measurements",
    "title": "Results",
    "section": "Measurements",
    "text": "Measurements"
  },
  {
    "objectID": "results.html#discussion",
    "href": "results.html#discussion",
    "title": "Results",
    "section": "Discussion",
    "text": "Discussion"
  },
  {
    "objectID": "media.html",
    "href": "media.html",
    "title": "Media",
    "section": "",
    "text": "Embed or link a short video showcasing the system in action."
  },
  {
    "objectID": "media.html#demo-video",
    "href": "media.html#demo-video",
    "title": "Media",
    "section": "",
    "text": "Embed or link a short video showcasing the system in action."
  },
  {
    "objectID": "media.html#photos",
    "href": "media.html#photos",
    "title": "Media",
    "section": "Photos",
    "text": "Photos\n\nFinal design photos (front, back, internals)\nBuild process photos\n\nAdd images to an images/ folder and reference them here, for example:"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Home Page",
    "section": "",
    "text": "The goal of this project is to design an analog style synthesizer with an instrument that makes sound when you spin it, press keys or turn knobs. The project generates real time audio controlled by a digital gyroscope, keypad, and knobs. The system produces two independent audio outputs, each corresponding to a distinct sound source. - The gyroscope is mounted on a spinning device and the rotational frequency determines a baseline sound output to one speaker. - The keypad and knobs control the note and pitch of another sound output to a different speaker."
  },
  {
    "objectID": "index.html#project-description-and-overview",
    "href": "index.html#project-description-and-overview",
    "title": "Project Overview",
    "section": "",
    "text": "The goal of this project is to design an analog style synthesizer with an instrument that makes sound when you spin it, press keys or turn knobs. The project generates real time audio controlled by a digital gyroscope, keypad, and knobs. The system produces two independent audio outputs, each corresponding to a distinct sound source.\n\nThe gyroscope is mounted on a spinning device and the rotational frequency determines a baseline sound output to one speaker.\nThe keypad and knobs control the note and pitch of another sound output to a different speaker.\n\nThe system uses two core processing units: a microcontroller (MCU) and an FPGA.\n\nThe MCU handles all user input from the gyroscope and keypad using the I2C protocol. It performs frequency mapping, converting the measured angular velocity or note input into precise frequency values, and generates a corresponding digital waveform. These waveforms are transmitted to the FPGA over the Serial Peripheral Interface (SPI).\nOn the FPGA, waveforms from the MCU are sent to an external DAC and then amplifyed to speakers."
  },
  {
    "objectID": "index.html#quick-links",
    "href": "index.html#quick-links",
    "title": "Project Overview",
    "section": "Quick Links",
    "text": "Quick Links\n\nTechnical Information\nMCU Design\nFPGA Design\nBill of Materials\nResults\nReferences\nTeam\nAcknowledgements"
  },
  {
    "objectID": "bom.html",
    "href": "bom.html",
    "title": "Bill of Materials",
    "section": "",
    "text": "Item\nPart Number\nQuantity\nPrice (Raw)\nShipping\nTotal Price (w/ Tax)\nPurpose\n\n\n\n\nGyroscope\nA3G4250DTR\n1\n15.98\n5.99\n21.97\nWheel\n\n\n6-wire Slip Ring\n1528-1176-ND\n1\n9.99\n0.97\n10.96\nWheel\n\n\nDAC\nMCP4725A1T-E/CH\n4\n5.08\n–\n5.08\nDriving speaker\n\n\nSMD adapters\n–\n3\nstockroom\n–\n–\nMounting DAC & gyro\n\n\nPotentiometer (volume)\n–\n1\nstockroom\n–\n–\n–\n\n\nCapacitors, resistors\n–\n5\nstockroom\n–\n–\n–\n\n\nSpeaker w/ amplifier\n–\n2\ndigital lab\n–\n–\n–\n\n\nMechanical switch keys\n–\n8\nmakerspace\n–\n–\nKeypad\n\n\nPlywood\n–\n1\nmakerspace\n–\n–\nWheel housing\n\n\n4 wood screws\n–\n4\nstockroom\n–\n–\nWheel housing\n\n\nPLA\n–\n8\nmakerspace\n–\n–\n3D print wheel/keycaps\n\n\n\n\nSummary\n\n\n\nDescription\nAmount\n\n\n\n\nPre-tax cost\n38.01\n\n\nShipping\n6.99\n\n\nSales tax\n4.03\n\n\nTotal\n49.02"
  },
  {
    "objectID": "acknowledgements.html",
    "href": "acknowledgements.html",
    "title": "Acknowledgements",
    "section": "",
    "text": "We thank Prof. Spencer and peers for feedback on design decisions."
  },
  {
    "objectID": "fpga.html",
    "href": "fpga.html",
    "title": "FPGA Design",
    "section": "",
    "text": "The FPGA receives square waves from the MCU over wires. It sends those waves to external DACs over I2C (two channels for two independent speakers).\n\n\n\nI/O:\n\nSPI interface for waveform/control with MCU\nI2C master to two external DACs\n\n\n\n\n\n\nReceive digital waveform samples from MCU over SPI\nOutput two-channel digital audio via I2C to external DACs\nDAC analog outputs are amplified and sent to speakers"
  },
  {
    "objectID": "fpga.html#fpga-overview-ice40-up5k-on-upduino-v3.1",
    "href": "fpga.html#fpga-overview-ice40-up5k-on-upduino-v3.1",
    "title": "FPGA Design",
    "section": "",
    "text": "The FPGA receives square waves from the MCU over wires. It sends those waves to external DACs over I2C (two channels for two independent speakers).\n\n\n\nI/O:\n\nSPI interface for waveform/control with MCU\nI2C master to two external DACs\n\n\n\n\n\n\nReceive digital waveform samples from MCU over SPI\nOutput two-channel digital audio via I2C to external DACs\nDAC analog outputs are amplified and sent to speakers"
  },
  {
    "objectID": "mcu.html",
    "href": "mcu.html",
    "title": "MCU Design",
    "section": "",
    "text": "STM32 Nucleo-32 board with an STM32L432KC MCU"
  },
  {
    "objectID": "mcu.html#mcu-overview-stm32l432kc",
    "href": "mcu.html#mcu-overview-stm32l432kc",
    "title": "MCU Design",
    "section": "",
    "text": "The MCU reads three inputs to determine the two output frequencies:\n\nKeypad (8 keys) via GPIO scanning\nGyroscope via SPI (8-bit angular acceleration/velocity data)\nKnobs via on-chip ADC (continuous control for pitch/modulation)\n\nBased on these inputs, the MCU computes two desired frequencies to be played on two speakers. The MCU generates corresponding digital waveforms and communicates with the FPGA over SPI for filtering and additional DSP.\n\n\n\nInput acquisition: GPIO keypad scan, SPI gyro reads, ADC sampling (knobs)\nFrequency mapping: Key-to-frequency and angular velocity-to-frequency conversions\nWaveform generation: Digital oscillators at target frequencies\nStreaming/control to FPGA via SPI\nReceiving filtered waveforms/status from FPGA\n\n\n\n\nA pin on the MCU is connected to a timer associated with one of the two target frequencies. The timer is toggled at a rate fast enough that the resulting composite output sounds like the sum of the two notes, while remaining slow enough for the FPGA to sample and filter both components effectively. This balances perceptual audio quality with FPGA processing constraints.\n\n\n\n\nSPI: Gyroscope reads, waveform/control data exchange with FPGA\nGPIO: 8-key keypad matrix\nADC: Knob voltages (modulation, pitch bend, filter control, etc.)"
  },
  {
    "objectID": "references.html",
    "href": "references.html",
    "title": "References",
    "section": "",
    "text": "Below are citations to datasheets and tools relevant to this project. Add any additional references used during design and implementation."
  },
  {
    "objectID": "references.html#cited-works",
    "href": "references.html#cited-works",
    "title": "References",
    "section": "Cited Works",
    "text": "Cited Works\nThis page uses the site bibliography (references.bib). Example citations:\n\nSTM32L432 MCU datasheet (STM32L432KC Datasheet 2018)\nLattice iCE40 UltraPlus FPGA (iCE40 UltraPlus Family Data Sheet 2017)\nQuarto documentation (Quarto Documentation 2025)"
  },
  {
    "objectID": "references.html#links",
    "href": "references.html#links",
    "title": "References",
    "section": "Links",
    "text": "Links\n\nSTM32 Nucleo-32 (NUCLEO-L432KC) — see vendor page\nUPduino v3.1 board resources — see vendor page\nKiCad EDA tool — see project page"
  },
  {
    "objectID": "fpga.html#fpga-design-reality",
    "href": "fpga.html#fpga-design-reality",
    "title": "FPGA Design",
    "section": "FPGA Design Reality",
    "text": "FPGA Design Reality\nDue to unforeseen circumstances, we had to rescope the project to greatly simplify the role of the FPGA in this project. Initially, the FIR filter was removed from the project entirely, leaving the FPGA to serve as a buffer between the MCU’s square wave outputs and the DACs. The data that previously encoded the FIR filter cutoff frequency would instead be used to control output volume. So, the FPGA would read in the two square waves from the MCU at 44kHz, scale them by an amount proportional to the 4-bit volume value, and send this result over I2C to the two DACs to ultimately drive the two speakers with two square waves at the specified volume.\nUnfortunately, the microcontroller and hardware design aspects of the project took longer than expected, and we did not complete the rescoped FPGA design."
  },
  {
    "objectID": "fpga.html#references",
    "href": "fpga.html#references",
    "title": "FPGA Design",
    "section": "References",
    "text": "References\nPiano Key Frequencies - Wikipedia\nDSP for FPGA: Simple FIR Filter in Verilog - Whitney Knitter, Hackster.io\nMCP4725 Datasheet\nProject PariVo, E155 2024\nSciPy Signal Processing firwin"
  },
  {
    "objectID": "madeleine.html",
    "href": "madeleine.html",
    "title": "Spinning Synth: MCU + FPGA Audio System",
    "section": "",
    "text": "Headshot\n\n\nMadeleine Kan is a senior engineering major at Harvey Mudd College. She is studying\ngeneral engineering with a focus on computer engineering with biomedical applications. She has experience\nin supply chain process engineering, FPGA and microcontroller programming, and mechanical design and analysis.\nIn the spring of 2025, she worked as part of the UC Berkeley clinic team to upgrade the communication protocol\nfor a low-cost air quality sensor. Since the start of 2024, she has worked in the Quantum Quasars Lab to develop\nan astronomical random number generator for Bell-type tests of quantum entanglement. She also has tutored for\na variety of engineering courses and labs. She is part of the CMS Swim team, specializing in sprint freestyle and butterfly.\nIn her free time, she likes to crochet, learn the piano, and spend time with her friends and family.\nLinks\n GitHub\n LinkedIn"
  },
  {
    "objectID": "sarah.html",
    "href": "sarah.html",
    "title": "Spinning Synth: MCU + FPGA Audio System",
    "section": "",
    "text": "Sarah is a current undergraduate student in Computer Science, Mathematics, and Economics, she is passionate about leveraging technology and analytical problem-solving to drive impactful solutions. Her experience spans software development, optimization, and data analysis, with projects ranging from building AI-powered applications to designing mathematical models for decision-making.\nShe is always eager to explore innovative applications of technology, connect with like-minded professionals, and contribute to projects that create meaningful impact.\nLinks\n GitHub\n LinkedIn"
  },
  {
    "objectID": "index.html#github-repository",
    "href": "index.html#github-repository",
    "title": "Project Overview",
    "section": "GitHub Repository",
    "text": "GitHub Repository\nGitHub Repository"
  },
  {
    "objectID": "index.html#video",
    "href": "index.html#video",
    "title": "Home Page",
    "section": "Video",
    "text": "Video"
  },
  {
    "objectID": "index.html#link-to-github",
    "href": "index.html#link-to-github",
    "title": "Home Page",
    "section": "Link to GitHub",
    "text": "Link to GitHub\nGitHub"
  },
  {
    "objectID": "system-overview.html#block-diagram",
    "href": "system-overview.html#block-diagram",
    "title": "System Overview",
    "section": "Block Diagram",
    "text": "Block Diagram"
  },
  {
    "objectID": "system-overview.html#what-is-new-compared-to-previous-learning",
    "href": "system-overview.html#what-is-new-compared-to-previous-learning",
    "title": "System Overview",
    "section": "What is New (Compared to Previous Learning)",
    "text": "What is New (Compared to Previous Learning)"
  },
  {
    "objectID": "hardware.html#circuit-diagram",
    "href": "hardware.html#circuit-diagram",
    "title": "Hardware",
    "section": "Circuit Diagram",
    "text": "Circuit Diagram"
  },
  {
    "objectID": "hardware.html#bom",
    "href": "hardware.html#bom",
    "title": "Hardware",
    "section": "BOM",
    "text": "BOM\n\n\n\n\n\n\n\n\n\n\n\n\nItem\nPart Number\nQuantity\nPrice (Raw)\nShipping\nTotal Price (w/ Tax)\nPurpose\n\n\n\n\nGyroscope\nA3G4250DTR\n1\n15.98\n5.99\n21.97\nWheel\n\n\n6-wire Slip Ring\n1528-1176-ND\n1\n9.99\n0.97\n10.96\nWheel\n\n\nDAC\nMCP4725A1T-E/CH\n4\n5.08\n–\n5.08\nDriving speaker\n\n\nSMD adapters\n–\n3\nstockroom\n–\n–\nMounting DAC & gyro\n\n\nPotentiometer (volume)\n–\n1\nstockroom\n–\n–\n–\n\n\nCapacitors, resistors\n–\n5\nstockroom\n–\n–\n–\n\n\nSpeaker w/ amplifier\n–\n2\ndigital lab\n–\n–\n–\n\n\nMechanical switch keys\n–\n8\nmakerspace\n–\n–\nKeypad\n\n\nPlywood\n–\n1\nmakerspace\n–\n–\nWheel housing\n\n\n4 wood screws\n–\n4\nstockroom\n–\n–\nWheel housing\n\n\nPLA\n–\n8\nmakerspace\n–\n–\n3D print wheel/keycaps\n\n\n\n\nSummary\n\n\n\nDescription\nAmount\n\n\n\n\nPre-tax cost\n38.01\n\n\nShipping\n6.99\n\n\nSales tax\n4.03\n\n\nTotal\n49.02"
  },
  {
    "objectID": "index.html#abstract",
    "href": "index.html#abstract",
    "title": "Home Page",
    "section": "",
    "text": "The goal of this project is to design an analog style synthesizer with an instrument that makes sound when you spin it, press keys or turn knobs. The project generates real time audio controlled by a digital gyroscope, keypad, and knobs. The system produces two independent audio outputs, each corresponding to a distinct sound source. - The gyroscope is mounted on a spinning device and the rotational frequency determines a baseline sound output to one speaker. - The keypad and knobs control the note and pitch of another sound output to a different speaker."
  },
  {
    "objectID": "system-overview.html#what-is-new",
    "href": "system-overview.html#what-is-new",
    "title": "System Overview",
    "section": "What is New",
    "text": "What is New"
  },
  {
    "objectID": "results.html",
    "href": "results.html",
    "title": "Results",
    "section": "",
    "text": "Our original specifications were as follows:\n\nOne frequency output is controlled continuously with gyroscope, and frequency increases with rotational velocity\nBased on keypad input, 8 distinct frequencies can be played within 1% accuracy\nFrequency output from gyroscope and keypad are played at the same time\nVolume can be adjusted continuously\nLow and high pass filters function with cutoff frequency that can be adjusted continuously\nLPF has a cutoff frequency between 8 kHz and 12 kHz, with a resolution of 2.5 kHz (within 10% accuracy)\nSystem can handle frequencies from 60 Hz to 1100 Hz\n\nAt the midpoint checkoff, we re-scoped the project to eliminate the last 3 specifications. Of inital specifications, we achieved enough for proficiency. We were able to read the velocity of the gyroscope, read the value of a continuous range of voltages using a potentiometer + voltage divider and the ADC, and play 8 distinct frequencies based on keypad input within 1% accuracy. However, we did not get to the point of driving a speaker based on the rotational velocity of the gyroscope, nor did we get to interpret the reading of the ADC to control the volume. That being said, we had all of the building blocks for our design, at least on the MCU side."
  },
  {
    "objectID": "results.html#specifications",
    "href": "results.html#specifications",
    "title": "Results",
    "section": "",
    "text": "Our original specifications were as follows:\n\nOne frequency output is controlled continuously with gyroscope, and frequency increases with rotational velocity\nBased on keypad input, 8 distinct frequencies can be played within 1% accuracy\nFrequency output from gyroscope and keypad are played at the same time\nVolume can be adjusted continuously\nLow and high pass filters function with cutoff frequency that can be adjusted continuously\nLPF has a cutoff frequency between 8 kHz and 12 kHz, with a resolution of 2.5 kHz (within 10% accuracy)\nSystem can handle frequencies from 60 Hz to 1100 Hz\n\nAt the midpoint checkoff, we re-scoped the project to eliminate the last 3 specifications. Of inital specifications, we achieved enough for proficiency. We were able to read the velocity of the gyroscope, read the value of a continuous range of voltages using a potentiometer + voltage divider and the ADC, and play 8 distinct frequencies based on keypad input within 1% accuracy. However, we did not get to the point of driving a speaker based on the rotational velocity of the gyroscope, nor did we get to interpret the reading of the ADC to control the volume. That being said, we had all of the building blocks for our design, at least on the MCU side."
  },
  {
    "objectID": "results.html#mcu-timing",
    "href": "results.html#mcu-timing",
    "title": "Results",
    "section": "MCU Timing",
    "text": "MCU Timing\nThe MCU SystemClock is configured based on the PLL, which is configured to run at 40 MHz. The ADC uses the SystemClock, and SPI uses the APB2 clk with the baudrate configured to be 1 MHz. The gyroscope and analog-to-digital converter (ADC) were both read using polling every 500 ms (i.e. at 2Hz). This was based on Timer2 of the MCU. If we got to the point of driving another speaker with the gyroscope reading, the frequency would have likely been increased until the speaker’s output frequency was appropriately responsive to changes in gyroscope velocity. However, since the sampling frequency for the gyroscope reading and the ADC didn’t need to be terribly high, polling was adequate. Had more frequent sampling been required, we could have implemented interrupts or direct memory access."
  },
  {
    "objectID": "results.html#gyro-spi",
    "href": "results.html#gyro-spi",
    "title": "Results",
    "section": "Gyro SPI",
    "text": "Gyro SPI"
  },
  {
    "objectID": "results.html#mcu-freq-output",
    "href": "results.html#mcu-freq-output",
    "title": "Results",
    "section": "MCU freq output",
    "text": "MCU freq output"
  },
  {
    "objectID": "results.html#adc-output",
    "href": "results.html#adc-output",
    "title": "Results",
    "section": "ADC output",
    "text": "ADC output\nThe ADC output was printed to the terminal as the potentiometer in a simple voltage divider circuit was adjusted. With a resolution of 6 bits, the ADC output spanned from 0-63 as the voltage into the analog pin spanned from 0-3.3V. This value was updated every 500ms through polling, although this could have been made more frequent."
  },
  {
    "objectID": "results.html#mcu-frequency-output",
    "href": "results.html#mcu-frequency-output",
    "title": "Results",
    "section": "MCU Frequency output",
    "text": "MCU Frequency output"
  },
  {
    "objectID": "results.html#resources",
    "href": "results.html#resources",
    "title": "Results",
    "section": "Resources",
    "text": "Resources\nA3G4250 Digital Gyroscope Datasheet"
  },
  {
    "objectID": "references.html",
    "href": "references.html",
    "title": "References",
    "section": "",
    "text": "DSP for FPGA: Simple FIR Filter in Verilog - Whitney Knitter, Hackster.io\nMCP4725 Datasheet\nPiano Key Frequencies - Wikipedia\nProject PariVo, E155 2024\nSciPy Signal Processing firwin"
  }
]